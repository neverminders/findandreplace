<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Replace Multiple Strings in .csv, .tsv Files (beta)</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="container">
    <h1>Replace Multiple Strings in .csv, .tsv Files (beta)</h1>
    <p class="subtitle">Drop CSV/TSV files or folders, apply multiple replacement rules, and download only modified files.</p>

    <section class="panel">
      <div id="dropZone" class="drop-zone" aria-label="Drop zone for files or folders" tabindex="0">
        <strong>Drop CSV/TSV files or folders here</strong>
        <p>(Subfolders are included when supported by your browser drag-and-drop APIs.)</p>
      </div>
      <small id="fileHint">No files added yet.</small>
    </section>

    <section class="panel">
      <div class="rules-header">
        <h2>Search / Replace Rules</h2>
      </div>
      <p class="rules-help">Patterns: <code>string</code> (whole word), <code>string*</code> (keep suffix), <code>*string</code> (keep prefix), <code>*string*</code> (keep both). A new rule row is added automatically when the last row is filled.</p>
      <div id="rulesContainer" class="rules-container"></div>
    </section>

    <section class="panel actions">
      <button id="processBtn" disabled>Process Files</button>
      <button id="downloadAllBtn" disabled>Download All (ZIP)</button>
    </section>

    <section class="panel">
      <h2>Results Queue (modified files only)</h2>
      <ul id="resultList" class="result-list"></ul>
    </section>
  </main>

  <footer class="footer">
    <p id="copyrightLine"></p>
    <p><a href="https://nevermind.ro" target="_blank" rel="noopener noreferrer">nevermind</a></p>
  </footer>

  <template id="ruleTemplate">
    <div class="rule-row">
      <label>
        Find text
        <input class="find-input" type="text" placeholder="e.g. Bucharest" />
      </label>
      <label>
        Replace with
        <input class="replace-input" type="text" placeholder="e.g. Cluj-Napoca" />
      </label>
      <label class="checkbox-row">
        <input class="case-sensitive-input" type="checkbox" />
        Case sensitive
      </label>
      <button class="remove-rule-btn" type="button">Remove</button>
    </div>
  </template>

  <template id="resultItemTemplate">
    <li class="result-item">
      <div>
        <p class="filename"></p>
        <small class="meta"></small>
      </div>
      <a class="download-link" download>Download</a>
    </li>
  </template>

  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
